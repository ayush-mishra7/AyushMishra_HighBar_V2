.PHONY: help setup install test run clean format

PY ?= python
PIP ?= pip

help:
	@echo "Makefile targets:"
	@echo "  make setup     -> create venv and install dev deps (optional)"
	@echo "  make install   -> install runtime deps"
	@echo "  make test      -> run pytest"
	@echo "  make run       -> run pipeline (python -m src.run)"
	@echo "  make clean     -> remove logs and reports"

install:
	$(PIP) install --upgrade pip
	$(PIP) install pytest flake8 pyyaml pandas tenacity

test:
	$(PY) -m pytest -q

run:
	$(PY) -m src.run

clean:
	rm -rf logs reports .pytest_cache
